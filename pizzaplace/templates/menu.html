{% extends 'index.html' %} {% load static %} {% block content %}
<section class="menu-section">
  <div class="container">
    <!-- Menu Header -->
    <div class="menu-header text-center mb-5">
      <h1 class="section-title">Our Delicious Menu</h1>
      <p class="section-subtitle">Choose from our wide range of pizzas</p>
    </div>
    <!-- Pizza Grid -->
    <div class="pizza-grid" id="pizzaGrid">
      <!-- Pizzas will be loaded here dynamically -->
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetchPizzas();
  });

  function fetchPizzas() {
    fetch("/api/addpizza/")
      .then((response) => response.json())
      .then((data) => {
        if (data.status === "success") {
          displayPizzas(data.data);
        } else {
          console.error("Error fetching pizzas:", data.message);
        }
      })
      .catch((error) => console.error("Error:", error));
  }

  function displayPizzas(pizzas) {
    const pizzaGrid = document.getElementById("pizzaGrid");
    pizzaGrid.innerHTML = "";

    pizzas.forEach((pizza) => {
      const pizzaElement = `
            <div class="menu-item">
                <div class="menu-img-container">
                    <img src="${pizza.image}" alt="${pizza.name}" class="img-fluid">
                </div>
                <div class="menu-item-details mt-3">
                    <h5 class="item-name">${pizza.name}</h5>
                    <p class="item-description">${pizza.description}</p>
                    <div class="price-tag mb-2">
                        <span class="currency">RS</span>
                        <span class="amount">${pizza.price}</span>
                    </div>
                    <button class="btn btn-add-cart" data-pizza-id="${pizza.id}">Add to Cart</button>
                </div>
            </div>
        `;
      pizzaGrid.innerHTML += pizzaElement;
    });
  }
</script>
{% endblock %}
